<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Tracking Demo</title>

    <!-- Google Analytics Clone Tracking Script -->
    <script>
        (function() {
            // Replace YOUR_TRACKING_ID with your actual tracking ID
            var trackingId = 'YOUR_TRACKING_ID';

            var script = document.createElement('script');
            script.src = 'http://localhost:3000/api/track?id=' + trackingId;
            script.async = true;
            document.head.appendChild(script);
        })();
    </script>
</head>
<body>
    <header>
        <h1>Analytics Tracking Demo</h1>
        <nav>
            <a href="#home">Home</a>
            <a href="#about">About</a>
            <a href="#contact">Contact</a>
        </nav>
    </header>

    <main>
        <section id="home">
            <h2>Welcome to Our Site</h2>
            <p>This page demonstrates the Google Analytics Clone tracking script.</p>

            <button onclick="trackButtonClick()">Click Me!</button>
            <button onclick="trackPurchase()">Make Purchase</button>
        </section>

        <section id="about">
            <h2>About Us</h2>
            <p>Learn more about our analytics tracking capabilities.</p>
        </section>

        <section id="contact">
            <h2>Contact</h2>
            <form id="contact-form" onsubmit="trackFormSubmit(event)">
                <input type="text" name="name" placeholder="Name" required>
                <input type="email" name="email" placeholder="Email" required>
                <textarea name="message" placeholder="Message" required></textarea>
                <button type="submit">Send Message</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Analytics Demo</p>
        <a href="https://github.com" target="_blank">Visit GitHub (external link)</a>
    </footer>

    <script>
        // Custom event tracking examples
        function trackButtonClick() {
            if (window.AnalyticsTracker) {
                window.AnalyticsTracker.trackEvent('button_click', {
                    buttonId: 'demo-button',
                    page: 'demo-home',
                    timestamp: new Date().toISOString()
                });
            }
            alert('Button clicked! Event tracked.');
        }

        function trackPurchase() {
            if (window.AnalyticsTracker) {
                window.AnalyticsTracker.trackGoal('purchase_completed', 99.99);
            }
            alert('Purchase tracked! Goal completed.');
        }

        function trackFormSubmit(event) {
            event.preventDefault();

            if (window.AnalyticsTracker) {
                window.AnalyticsTracker.trackEvent('form_submit', {
                    formId: 'contact-form',
                    formType: 'contact',
                    fields: ['name', 'email', 'message']
                });
            }

            alert('Form submitted! Event tracked.');
            // In real implementation, you would submit the form here
        }

        // Track page-specific events
        document.addEventListener('DOMContentLoaded', function() {
            // Track when user scrolls to bottom
            window.addEventListener('scroll', function() {
                if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 100) {
                    if (!window.scrolledToBottom) {
                        window.scrolledToBottom = true;
                        if (window.AnalyticsTracker) {
                            window.AnalyticsTracker.trackEvent('scroll_to_bottom', {
                                page: window.location.pathname
                            });
                        }
                    }
                }
            });

            // Track time spent reading
            var startTime = Date.now();
            window.addEventListener('beforeunload', function() {
                var timeSpent = Math.round((Date.now() - startTime) / 1000);
                if (window.AnalyticsTracker) {
                    window.AnalyticsTracker.trackEvent('page_engagement', {
                        timeSpent: timeSpent,
                        page: window.location.pathname
                    });
                }
            });
        });
    </script>
</body>
</html>